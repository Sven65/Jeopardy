(window.webpackJsonp=window.webpackJsonp||[]).push([[19,9],{445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(r);var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return a.default.createElement("button",{className:"btn "+this.props.className,type:this.props.type,name:this.props.name||"",id:this.props.id,onClick:this.props.onClick,ref:this.props.Ref},this.props.text,void 0!==this.props.icon&&a.default.createElement("span",{className:"icon is-right"},a.default.createElement("i",{className:"mdi mdi-"+this.props.icon})))}}]),t}();t.default=s},466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(r);var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"group "+(this.props.hidden?"hidden":"")},a.default.createElement("input",{id:this.props.id,autoComplete:this.props.autoComplete,type:this.props.type,className:"validate",value:this.props.value,ref:this.props.inputRef,onKeyDown:this.props.onKeyDown,onChange:this.props.onChange,required:"required"}),a.default.createElement("span",{className:"highlight"}),a.default.createElement("span",{className:"bar"}),a.default.createElement("label",null,this.props.label))}}]),t}();t.default=s},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(r);var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:this.props.hidden?"hidden":""},this.props.children)}}]),t}();t.default=s},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={bold:function(e){return e.replace(/\*\*([^\*\*]+)\*\*/g,"<b>$1</b>")},italic:function(e){return e.replace(/\*([^\*]+)\*/g,"<i>$1</i>")},strike:function(e){return e.replace(/~~([^~~]+)~~/g,"<s>$1</s>")},Format:function(e){return e=this.bold(e),e=this.italic(e),e=this.strike(e)}}},582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(49),a=l(r),s=l(n(581)),i=l(n(580));function l(e){return e&&e.__esModule?e:{default:e}}var u=new(0,n(579).Parser),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.jsemoji=new s.default,n.jsemoji.img_set="twitter",n.jsemoji.img_sets.twitter.path="https://unpkg.com/emoji-datasource-twitter@4.0.4/img/twitter/64/",n.jsemoji.supports_css=!1,n.jsemoji.allow_native=!1,n.jsemoji.replace_mode="unified",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return a.default.createElement("li",{className:"chat-message-container","data-sender":this.props.user.userID,"data-timestamp":this.props.timeStamp},"SYSTEM"!==this.props.user.userID&&a.default.createElement("img",{src:this.props.user.image,className:"chat-image"}),a.default.createElement("div",{className:"message-wrap","data-system":"SYSTEM"===this.props.user.userID},"SYSTEM"!==this.props.user.userID&&a.default.createElement("span",{className:"chat-sender",style:{color:this.props.user.color||"#FFF"}},this.props.user.username),a.default.createElement("span",{className:"chat-message"},u.parse(this.jsemoji.replace_colons(i.default.Format(this.props.message))))))}}]),t}();t.default=c},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(49),a=c(r);c(n(165)),c(n(164));n(589);var s=n(527),i=(c(n(466)),c(n(445)),c(n(582))),l=c(n(530)),u=c(n(106));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={chat:{messages:[]},showEmojiPicker:!1},n.sendMessage=n.sendMessage.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.toggleEmojiPicker=n.toggleEmojiPicker.bind(n),n.emojiClicked=n.emojiClicked.bind(n),n.messageInput=a.default.createRef(),n.chatContainer=a.default.createRef(),n.chatBottom=a.default.createRef(),n._localCommands=["VERSION","SUDO"],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;u.default.subscribe(function(){e.setState(u.default.getState()),e.scrollToBottom()})}},{key:"sendMessage",value:function(){""!==this.messageInput.value&&(this.messageInput.value.startsWith("/")&&this._localCommands.indexOf(this.messageInput.value.toUpperCase().replace("/",""))>-1?u.default.dispatch({type:"LOCAL_COMMAND",data:{command:this.messageInput.value.toUpperCase().replace("/","")}}):u.default.dispatch({type:"s/chat",data:{roomID:this.state.game.roomID,user:this.state.game.user,message:this.messageInput.value,timeStamp:Date.now()}}),this.messageInput.value="")}},{key:"scrollToBottom",value:function(){if(null!==this.chatContainer){var e=this.chatContainer.getBoundingClientRect(),t={top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft},n={top:(e=this.chatBottom.getBoundingClientRect()).top+document.body.scrollTop,left:e.left+document.body.scrollLeft};this.chatContainer.scrollTop=n.top-t.top+this.chatContainer.scrollTop}}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.sendMessage()}},{key:"toggleEmojiPicker",value:function(e){this.setState({showEmojiPicker:!this.state.showEmojiPicker})}},{key:"_insertAtCursor",value:function(e,t){if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t;else if(e.selectionStart||0===e.selectionStart){var n=e.selectionStart,o=e.selectionEnd;e.value=""+e.value.substring(0,n)+t+e.value.substring(o,e.value.length)}else e.value+=myValue}},{key:"emojiClicked",value:function(e){this._insertAtCursor(this.messageInput,e.colons),this.setState({showEmojiPicker:!1})}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:"row no-pad-bot"},a.default.createElement("div",{className:"col s12 l4 right",id:"chat"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"container",id:"chat-container"},a.default.createElement("ul",{id:"chat-messages",ref:function(t){return e.chatContainer=t}},this.state.chat.messages.map(function(e){return a.default.createElement(i.default,{user:e.user,timeStamp:e.timeStamp,message:e.message,key:e.timeStamp})}),a.default.createElement("li",{className:"chatBottom",ref:function(t){return e.chatBottom=t}}))),a.default.createElement("div",{className:"chat-input"},a.default.createElement(l.default,{hidden:!this.state.showEmojiPicker},a.default.createElement(s.Picker,{set:"twitter",sheetSize:64,onSelect:this.emojiClicked,title:"",showPreview:!1,showSkinTones:!0,emojiTooltip:!0,style:{width:"100%"}})),a.default.createElement("div",{className:"field has-addons"},a.default.createElement("div",{className:"control has-icons-left"},a.default.createElement("input",{className:"input",type:"text",autoComplete:"off",placeholder:"Type a message!",id:"message",ref:function(t){return e.messageInput=t},onKeyDown:this.onKeyDown}),a.default.createElement("span",{className:"icon is-left",id:"emoji-picker-toggle",onClick:this.toggleEmojiPicker},a.default.createElement("i",{className:"mdi mdi-emoticon"}))),a.default.createElement("div",{className:"control"},a.default.createElement("a",{className:"button is-primary",id:"chatButton",onClick:this.sendMessage},"Send",a.default.createElement("span",{className:"icon"},a.default.createElement("i",{className:"mdi mdi-send"})))))))))}}]),t}();t.default=f}}]);