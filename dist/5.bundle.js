(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{441:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(49),o=m(s),n=m(a(165)),i=m(a(164)),l=m(a(672)),u=m(a(671)),d=m(a(670)),c=m(a(106));function m(e){return e&&e.__esModule?e:{default:e}}var f=(0,n.default)({loader:function(){return a.e(16).then(a.t.bind(null,669,7))},loading:i.default}),h=(0,n.default)({loader:function(){return a.e(15).then(a.t.bind(null,604,7))},loading:i.default}),g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={user:{userData:{},userLoggedIn:!1},userFormLoad:!1,showProfile:!1,showLoginForm:!1,showBoardAdder:!1,showDropdown:!1},a.privateSwitch=a.privateSwitch.bind(a),a._burgerClick=a._burgerClick.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;c.default.subscribe(function(){e.setState(c.default.getState())}),document.addEventListener("closeUserForm",function(t){e.setState({showLoginForm:!1})})}},{key:"startGame",value:function(){c.default.dispatch({type:"s/GAME_ACTION_START",data:{roomID:this.state.game.roomID,userID:this.state.game.user.userID}})}},{key:"leaveGame",value:function(){c.default.dispatch({type:"s/USER_ACTION_LEAVE",data:{roomID:this.state.game.roomID,userID:this.state.game.user.userID}}),c.default.dispatch({type:"LEAVE"})}},{key:"logout",value:function(){this.setState({showProfile:!1,showLoginForm:!1});var e=new Event("USER_FORM_UNDONE"),t=document.querySelector("#usermodal-holder");null!==t&&t.dispatchEvent(e),c.default.dispatch({type:"USER_LOGOUT"})}},{key:"toggleProfile",value:function(e){this.setState({showProfile:!this.state.showProfile})}},{key:"toggleLoginForm",value:function(e){this.setState({showLoginForm:!this.state.showLoginForm})}},{key:"toggleBoardAdder",value:function(e){this.setState({showBoardAdder:!this.state.showBoardAdder})}},{key:"privateSwitch",value:function(e){c.default.dispatch({type:"s/SET_GAME_PRIVATE",data:{roomID:this.state.game.roomID,userID:this.state.game.user.userID,isPrivate:e.target.checked}})}},{key:"_burgerClick",value:function(){this.setState({showDropdown:!this.state.showDropdown})}},{key:"render",value:function(){var e=this,t=this.state.user.userLoggedIn,a=this.state.user.userLoggedIn&&this.state.showProfile,r=this.state.showLoginForm,s=this.state.showBoardAdder;return o.default.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",id:"main-nav"},o.default.createElement("div",{className:"navbar-brand"},o.default.createElement("a",{className:"navbar-item"},o.default.createElement("img",{src:d.default,alt:"TriviaParty"}),""!==this.props.roomID&&o.default.createElement("span",{id:"gameCodeHeader"},"Game: ",this.props.roomID)),o.default.createElement("a",{role:"button",className:"navbar-burger "+(this.state.showDropdown?"is-active":"is-gay"),"data-target":"navMenu","aria-label":"menu","aria-expanded":"false",onClick:this._burgerClick},o.default.createElement("span",{"aria-hidden":"true"}),o.default.createElement("span",{"aria-hidden":"true"}),o.default.createElement("span",{"aria-hidden":"true"}))),o.default.createElement("div",{className:"navbar-menu "+(this.state.showDropdown?"is-active":""),id:"navMenu"},o.default.createElement("div",{className:"navbar-end"},o.default.createElement("a",{className:"navbar-item no-background "+(this.props.hidePrivateSwitch?"hidden":"")},o.default.createElement(u.default,{onChange:this.privateSwitch})),o.default.createElement("a",{id:"game-button-start",onClick:this.startGame.bind(this),className:"navbar-item dark-background "+(this.props.hideStartButton?"hidden":"")},"Start Game ",o.default.createElement("i",{className:"mdi mdi-18px mdi-play"})),o.default.createElement("a",{id:"game-button-leave",onClick:this.leaveGame.bind(this),className:"navbar-item dark-background "+(this.props.hideLeaveButton?"hidden":"")},"Leave Game ",o.default.createElement("i",{className:"mdi mdi-18px mdi-exit-to-app"})),o.default.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},o.default.createElement("a",{className:"navbar-link user-link"},o.default.createElement("i",{className:"mdi mdi-account"}),t?this.state.user.userData.username:"User"),t?o.default.createElement("div",{className:"navbar-dropdown"},o.default.createElement("a",{className:"navbar-item",onClick:this.toggleProfile.bind(this)},o.default.createElement("a",{className:"modal-trigger",id:"userprofile-trigger"},"Profile")),o.default.createElement("a",{className:"navbar-item",onClick:this.toggleBoardAdder.bind(this)},o.default.createElement("a",{className:"modal-trigger",id:"boardAdder-trigger"},"Game Boards")),o.default.createElement("a",{className:"navbar-item",onClick:this.logout.bind(this)},o.default.createElement("a",{className:"logout",id:"user-logout"},o.default.createElement("span",{className:"icon is-left"},o.default.createElement("i",{className:"mdi mdi-18px mdi-exit-to-app"})),"Logout"))):o.default.createElement("div",{className:"navbar-dropdown"},o.default.createElement("a",{className:"navbar-item",onClick:this.toggleLoginForm.bind(this)},o.default.createElement("a",{className:"modal-trigger",id:"usermodal-trigger"},"Login")))))),o.default.createElement("div",{className:"loader-holder is-fixed",id:"usermodal-holder",style:{display:r?"":"none"}},o.default.createElement(l.default,{closeButtonFunction:this.toggleLoginForm.bind(this)})),function(){if(r){var e=new Event("SET_HEIGHT");document.querySelector("#usermodal-holder").dispatchEvent(e)}}(),this.state.userFormLoad&&o.default.createElement("div",{className:"loader-holder"},o.default.createElement(i.default,null)),a&&o.default.createElement(f,{username:this.state.user.userData.username,image:this.state.user.userData.image,wins:this.state.user.userData.wins,losses:this.state.user.userData.losses,balance:this.state.user.userData.balance,logoutFunc:this.logout.bind(this),userToken:this.state.user.userData.token,closeButtonFunction:this.toggleProfile.bind(this),selectedTheme:this.state.user.userData.theme,unlockedColors:this.state.user.userData.unlockedColors}),s&&o.default.createElement(h,{closeButtonFunction:this.toggleBoardAdder.bind(this),userToken:this.state.user.userData.token}),function(){if(t&&!e.state.userRegistered){var a=new Event("USER_FORM_DONE");document.querySelector("#usermodal-holder").dispatchEvent(a)}}())}}]),t}();t.default=g},670:function(e,t,a){e.exports=a.p+"d611ac90d405a5a5b4201113018e5ab4.svg"},671:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(49),o=function(e){return e&&e.__esModule?e:{default:e}}(s);var n=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"onoffswitch"},o.default.createElement("input",{type:"checkbox",name:"onoffswitch",className:"onoffswitch-checkbox",id:"onoffswitch",defaultChecked:!0,onChange:this.props.onChange}),o.default.createElement("label",{className:"onoffswitch-label",htmlFor:"onoffswitch"},o.default.createElement("span",{className:"onoffswitch-inner"}),o.default.createElement("span",{className:"onoffswitch-switch"})))}}]),t}();t.default=n},672:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(49),o=l(s),n=l(a(166)),i=l(a(106));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={"register-username":"","register-email":"","register-password":"","register-cpassword":"",user:{registerError:{},loginError:{reason:""}},"login-username":"","login-password":"",forgotPasswordSent:!1,passwordResetError:null,disableRegisterForm:!1,disableLoginForm:!1},a.handleInput=a.handleInput.bind(a),a.onRegisterKeyDown=a.onRegisterKeyDown.bind(a),a.onLoginKeyDown=a.onLoginKeyDown.bind(a),a.forgotPassword=a.forgotPassword.bind(a),a._loginForm=o.default.createRef(),a._registerForm=o.default.createRef(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;i.default.subscribe(function(){e.setState(i.default.getState(),function(){e.state.user.forgotPasswordSent?(0,n.default)({title:"Success!",text:"Check your email for further instructions!",icon:"success",button:"Okay!"}):null!==e.state.user.passwordResetError&&(0,n.default)({title:"Error!",text:e.state.user.passwordResetError,icon:"error",button:"Try Again"}).then(function(t){e.forgotPassword()}),e.state.clearUserForm&&(e.clearLoginForm(),e.clearRegisterForm(),i.default.dispatch({type:"RESET_CLEAR_USER_FORM"}))})})}},{key:"handleInput",value:function(e){"privacyAgree"===e.target.name&&(e.target.value=e.target.checked),this.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e.target.name,e.target.value)),"register-email"===e.target.name&&(this.validateEmail(e.target.value)?(e.target.removeAttribute("style"),e.target.parentNode.querySelector(".user-modal-form-group-error").classList.add("hidden")):(e.target.style["border-bottom"]="1px solid #ff0000",e.target.parentNode.querySelector(".user-modal-form-group-error").classList.remove("hidden")))}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"register",value:function(){this.state.userRegistered||this.state.disableRegisterForm||(""!==this.state["register-username"]&&""!==this.state["register-email"]&&""!==this.state["register-password"]&&""!==this.state["register-cpassword"]&&this.state.privacyAgree?this.validateEmail(this.state["register-email"])&&(i.default.dispatch({type:"USER_FORM_LOAD"}),i.default.dispatch({type:"s/USER_REGISTER",data:{username:this.state["register-username"],email:this.state["register-email"],password:this.state["register-password"],cpassword:this.state["register-cpassword"]}})):this.setState({user:{registerError:{reason:"Please fill in all fields."}}}))}},{key:"login",value:function(){this.setState({user:{loginError:{}}}),this.state.userLoggedIn||this.state.disableLoginForm||(""!==this.state["login-username"]&&""!==this.state["login-password"]?(i.default.dispatch({type:"USER_FORM_LOAD"}),i.default.dispatch({type:"s/USER_LOGIN",data:{username:this.state["login-username"],password:this.state["login-password"]}})):this.setState({user:{loginError:{reason:"Please fill in all fields."}}}))}},{key:"onRegisterKeyDown",value:function(e){13===e.keyCode&&this.register()}},{key:"onLoginKeyDown",value:function(e){13===e.keyCode&&this.login()}},{key:"forgotPassword",value:function(){var e=this,t=document.createElement("input");t.setAttribute("placeholder","me@example.com"),t.setAttribute("type","email"),t.setAttribute("required","true"),t.classList.add("swal-content__input"),(0,n.default)({title:"Please enter the email of your account",content:t,buttons:{cancel:"Cancel",go:{text:"Go!",closeModal:!1,value:1}}}).then(function(a){if(!a||null===a)return n.default.stopLoading(),n.default.close(),void i.default.dispatch({type:"RESET_PASSWORD_RESET_ERROR"});var r=t.value;if(!r)throw null;e.validateEmail(r)?i.default.dispatch({type:"s/FORGOT_PASSWORD",data:{email:r}}):(0,n.default)({title:"Error.",text:"Invalid email entered.",icon:"error",button:"Try again"}).then(function(t){e.forgotPassword()})}).catch(function(t){t?(0,n.default)("Oh noes!","The AJAX request failed!","error"):(0,n.default)({title:"Error.",text:"No email entered.",icon:"error",button:"Try again"}).then(function(t){e.forgotPassword()})})}},{key:"clearLoginForm",value:function(){this.setState({"login-username":"","login-password":""}),this._loginForm.reset()}},{key:"clearRegisterForm",value:function(){this.setState({"register-username":"","register-email":"","register-password":"","register-cpassword":"",user:{registerError:{}}}),this._registerForm.reset()}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"modal is-active",id:"user-profile"},o.default.createElement("div",{className:"modal-background"}),o.default.createElement("div",{className:"modal-card"},o.default.createElement("div",{id:"user-modal"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"user-modal-form"},o.default.createElement("div",{className:"user-modal-form-toggle"}),o.default.createElement("div",{className:"user-modal-form-panel one"},o.default.createElement("div",{className:"user-modal-form-header"},o.default.createElement("h1",null,"Account Login"),o.default.createElement("h6",{className:""===this.state.user.loginError.reason?"user-modal-success":"user-modal-error"},this.state.user.loginError.reason||this.state.user.userLoggedIn&&"Logged In!")),o.default.createElement("div",{className:"user-modal-form-content"},o.default.createElement("form",{ref:function(t){return e._loginForm=t}},o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"login-username"},"Username"),o.default.createElement("input",{id:"login-username",name:"login-username",disabled:this.state.disableLoginForm,required:"required",type:"text",onChange:this.handleInput,onKeyDown:this.onLoginKeyDown})),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"login-password"},"Password"),o.default.createElement("input",{id:"login-password",name:"login-password",disabled:this.state.disableLoginForm,required:"required",type:"password",onChange:this.handleInput,onKeyDown:this.onLoginKeyDown})),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{className:"user-modal-form-remember"},o.default.createElement("input",{type:"checkbox",name:"login-checkbox",disabled:this.state.disableLoginForm}),"Remember Me"),o.default.createElement("a",{className:"user-modal-form-recovery",href:"#",onClick:this.forgotPassword},"Forgot Password?")),o.default.createElement("div",{className:"user-modal-form-group",id:"register-trigger-holder"},o.default.createElement("a",{className:"user-modal-form-recovery right",href:"#",id:"register-trigger"},"New User?")),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("button",{type:"button",disabled:this.state.disableLoginForm,onClick:this.login.bind(this)},"Log In"))))),o.default.createElement("div",{className:"user-modal-form-panel two"},o.default.createElement("div",{className:"user-modal-form-header"},o.default.createElement("h1",null,"Register Account"),o.default.createElement("h6",null,this.state.user.registerError.reason||this.state.userRegistered&&"Registered! Check your emails to verify your email!")),o.default.createElement("div",{className:"user-modal-form-content"},o.default.createElement("form",{ref:function(t){return e._registerForm=t}},o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"username"},"Username"),o.default.createElement("input",{id:"username",name:"register-username",disabled:this.state.disableRegisterForm,required:"required",type:"text",onChange:this.handleInput,onKeyDown:this.onRegisterKeyDown})),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"password"},"Password"),o.default.createElement("input",{id:"password",name:"register-password",disabled:this.state.disableRegisterForm,required:"required",type:"password",onChange:this.handleInput,onKeyDown:this.onRegisterKeyDown})),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"cpassword"},"Confirm Password"),o.default.createElement("input",{id:"cpassword",name:"register-cpassword",disabled:this.state.disableRegisterForm,required:"required",type:"password",onChange:this.handleInput,onKeyDown:this.onRegisterKeyDown})),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("label",{htmlFor:"email"},"Email Address"),o.default.createElement("input",{id:"email",name:"register-email",disabled:this.state.disableRegisterForm,required:"required",type:"email",onChange:this.handleInput,onKeyDown:this.onRegisterKeyDown}),o.default.createElement("span",{className:"user-modal-form-group-error"},"Please enter a valid email")),o.default.createElement("div",{className:"user-modal-form-group privacyAgreementHolder"},o.default.createElement("div",{className:"md-checkbox"},o.default.createElement("input",{id:"privacyAgree",name:"privacyAgree",disabled:this.state.disableRegisterForm,required:"required",type:"checkbox",onClick:this.handleInput}),o.default.createElement("label",{htmlFor:"privacyAgree"},"I have read and agree to the ",o.default.createElement("a",{href:"Privacy",id:"privacyLink",target:"_blank"},"Privacy Policy")))),o.default.createElement("div",{className:"user-modal-form-group"},o.default.createElement("button",{type:"submit",disabled:this.state.disableRegisterForm,onClick:this.register.bind(this)},"Register"))))))),o.default.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:this.props.closeButtonFunction}))))}}]),t}();t.default=u}}]);